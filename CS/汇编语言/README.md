# 读书日记

## 第二章寄存器

 1. 汇编指令是机器指令的助记符，同机器指令一一对应
 2. 每一种CPU都有自己的汇编指令集
 3. CPU可以直接使用的信息在存储器中存放
 4. 在存储器中指令和数据没有任何区别，都是二进制信息。
 5. 存储单元从零开始顺序编号
 6. 一个存储单元可以存储8个bit，即8位二进制数
 7. 1byte = 8bit  1KB = 1024B

 #### 检测点：
 1. 1个CPU的寻址能力为8KB，那么它的地址总线的宽度为 13 
 2. 1KB的存储器有 1024个存储单元，编号从 0 到1023
 3. 1KB的存储器可以存储1024*8 个bit，1024个byte
 4. 1GB = 1024*1024*1024byte   1MB = 1024*1024byte  1KB = 1024byte
 5. 8080、8088、80286、80386 的地址总线宽度分别为16根、20根、24根、32根。则它们寻址能力分别：2^16 2^20  2^24  2^32
 6. 8080、8088、80286、80386 的数据总线宽度分别为8根、8根、16根、16根、32根。则它们一次可以传送的数据为： 1 1 2 2 4
 7. 从内存中读取1024个字节，8086至少要读(1024/2 = 512)次，80386至少要读(1024/4 = 256)
 8. 在存储器中，数据和程序以二进制形式存放。

 CPU指令示例： 
|  程序段中的指令   | 指令执行后AX中的数据  |  指令执行后BX中的数据  |
|  ----  |  ---- | ---- |
 | mov ax,4E20H   |    4E20H              |         0000H         |
 | add ax,1406H   |    6226H              |          0000H        |
 | mov bx,2000H   |    6226H              |          2000H        |
 | add ax,bx      |    8226H              |          2000H        |
 | mov bx,ax      |    8226H              |          8226H        |
 | add ax,bx      |    044CH(0x8226+0x8226)  |     8226H          |

 ax 为16位寄存器， al 为8位寄存器
 
 #### 检测点2.1 
 (1)写出每条汇编指令执行后的相关寄存器值
 
 |  指令   | 数据  |
 |  ----  | ----  |
 | mov ax,62627      | AX = 0xF4A3 => 则ah = 0xF400  al = 0x00A3 |
 | mov ah,31H        | AX = (ah->0x3100)+(al->0x00A3) = 0x31A3   |
 | mov al,23H        | AX = (ah->0x3100)+(al->0x0023) = 0x3123   |
 | add ax,ax         |  AX = 0x6246                              |
 | mov bx,826CH      |  BX = 0x826C                              |
 | mov cx,ax         |  CX = 0x6246                              |
 | mov ax,bx         |  AX = 0x826C+0x826C = 0x04D8              |
 | mov al,bh        |  AX = bh->0x82 => al->0x00D8 = 0x0482     |
 | mov ah,bl        |  AX = bl->0x6C => ah->0x04 = 0x6C82       |
 | add ah,ah        |  AX = ah->0x6C + ah->0x6C = 0xD882        |
    
 #### 知识点
 ##### CPU访问内存时，用一个基础地址+相对于基础地址偏移相加，给出内存单元的物理地址即 “基础地址+偏移地址 = 物理地址”寻址模式
 ##### 内存中并没有分段，段的划分来自于CPU，使我们可以用分段的方式来管理内存
 
 #### 检测点2.2
 1. 给定段地址为0001H，仅通过变化偏移地址寻址，CPU的寻址范围为 10H 到 FFFFH+10H
 2. 有一数据存放在内存20000H单元，现给定段地址为SA，若想用偏移地址寻到次单元。则SA应满足的条件是：最小为（1001H），最大为（2000H）

 #### CS和IP
  >   8086有4个段寄存器：CS、DS、SS、ES    
  >   任意时刻，CPU将CS：IP指向的内容当作指令执行
  >   mov 指令无法修改CS 和IP的值
  >   jmp指令可以修改CS\IP值
  >   若想同时修改CS\IP的内容，可用形如“jmp段地址：偏移地址”的指令完成
     
 1. 从CS:IP指向的内存单元读取指令，读取的指令进入指令缓冲器；
 2. IP= IP+所读取指令的长度，从而指向下一条指令；
 3. 指令执行，重复1；

  jmp 2AE3:3  执行后：CS= 2AE2H,IP=0003H,CPU将从2AE33H处读取指令
  
  #### 检测点2.3
  一共修改四次：分别为：
  1. mov ax,bx 之后修改IP值
  2. sub ax,ax  也会修改IP值
  3. jmp ax  读取该指令也会修改
  4. jmp ax 执行后修改IP值
  5. 最后IP值为0000H，因为ax的最后值为0000H。

## 第三章 寄存器（内存访问）

